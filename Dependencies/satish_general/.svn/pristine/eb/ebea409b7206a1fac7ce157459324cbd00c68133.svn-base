function newyvals = interpyvalsfixintrvls(oldxvals,oldyvals,newxvals)
%function newyvals = interpyvalsfixintrvls(oldxvals,oldyvals,newxvals)

%randomly generated perturbation used in case of interpolation issues
%generated long ago, fixed here to ensure consistency
err = [-1.18777701646980e-10;-2.20232071732344e-10;9.86337391002023e-11;-5.18635066344746e-11;3.27367564080834e-11;2.34057012847185e-11;2.14661388790945e-12;-1.00394446674772e-10;-9.47146064738541e-11;-3.74429195029166e-11;-1.18588621380853e-10;-1.05590292352369e-10;1.47247993441992e-10;5.57438318378432e-12;-1.21731745370455e-10;-4.12271336864321e-12;-1.12834386432023e-10;-1.34927754310249e-10;-2.61101623061621e-11;9.53465445504819e-11;1.28644430046645e-11;6.56467513885396e-11;-1.16781936472664e-10;-4.60605179506150e-11;-2.62439952838333e-11;-1.21315206849391e-10;-1.31943699810954e-10;9.31217514995436e-11;1.12448963841337e-12;-6.45145815691170e-11;8.05728793112376e-11;2.31626010780437e-11;-9.89759671682004e-11;1.33958570061039e-10;2.89502034538413e-11;1.47891705768128e-10;1.13802801285837e-10;-6.84138585136340e-11;-1.29193604496594e-10;-7.29262762636467e-12;-3.30598879892764e-11;-8.43627639154800e-11;4.97769664182783e-11;1.48849047090348e-10;-5.46475894767623e-11;-8.46758163883060e-11;-2.46336528084900e-11;6.63024145855908e-11;-8.54197374468980e-11;-1.20131481533904e-10;-1.19869428057387e-11;-6.52940148415865e-12;4.85295555916544e-11;-5.95490902619476e-11;-1.49667743824475e-11;-4.34751931152533e-11;-7.93302230234206e-12;1.53515226612215e-10;-6.06482859277266e-11;-1.34736267385024e-10;4.69383119866330e-11;-9.03566942617776e-11;3.58796387294769e-12;-6.27531219966831e-11;5.35397954249106e-11;5.52883517423822e-11;-2.03690479567358e-11;-2.05432468055661e-10;1.32560731417280e-11;1.59294070376602e-10;1.01841178862471e-10;-1.58040249930316e-10;-7.86619193594521e-12;-6.81656860002363e-11;-1.02455305742903e-10;-1.23435347798426e-10;2.88807018730340e-11;-4.29303004551915e-11;5.58011901764726e-12;-3.67873566740638e-11;-4.64973367171118e-11;3.70960583848952e-11;7.28282931551495e-11;2.11216016977150e-10;-1.35729774309675e-10;-1.02261014433421e-10;1.03783419871876e-10;-3.89799548476831e-11;-1.38126562401984e-10;3.15542632772365e-11;1.55324256851535e-10;7.07893884632476e-11;1.95738475514751e-10;5.04542353592166e-11;1.86452902048530e-10;-3.39811777414964e-11;-1.13977940231323e-10;-2.11123483380258e-11;1.19024493625120e-10;-1.11620875778561e-10;6.35274134747122e-11];
if size(oldxvals,1) == 1
    errvec = (err(1:length(oldxvals)))';
    errvec=[0,errvec(1:end-2),0];
else
    errvec = (err(1:length(oldxvals)))';
    errvec=[0;errvec(1:end-2);0];
end


try
    %lets try it
    newyvals = interp1(oldxvals,oldyvals,newxvals,'cubic');
catch ERR %#ok<NASGU>
    %typically errors out coz of not enough "unique" values in some vector
    %perturb vectors a little while keeping ends the same, allowing for interp function to work                    
    modxvals = oldxvals+errvec;
    modyvals = oldyvals+errvec;
    newyvals = interp1(modxvals,modyvals,newxvals,'cubic');
end 

end